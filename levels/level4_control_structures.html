
<!DOCTYPE html>
<html lang="en">
<head>
  

  <meta charset="UTF-8" />
  <title>Control Structures - Drag & Drop</title>
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
  <link rel="stylesheet" href="../style.css" />
  <style>
    html, body { height: 100%; margin: 0; }
    #blocklyDiv { height: 480px; width: 100%; }
    header, footer { text-align: center; margin: 10px 0; }
  </style>
</head>
<body>
  <div id="timer" style="font-weight:bold; font-size:1.2rem; color:#e74c3c; margin-bottom:15px;">
  Time left: <span id="time">60</span> seconds
</div>
  <header><h1>Level 4: Control Structures - Drag & Drop</h1></header>

  <main>
    <p>Use blocks to build conditional statements and loops!</p>
    <div id="blocklyDiv"></div>
    <xml id="toolbox" style="display: none">
      <block type="controls_if"></block>
      <block type="controls_ifelse"></block>
      <block type="controls_repeat_ext"></block>
      <block type="controls_whileUntil"></block>
      <block type="logic_compare"></block>
      <block type="logic_boolean"></block>
      <block type="math_number"><field name="NUM">5</field></block>
      <block type="text"></block>
      <block type="text_print"></block>
    </xml>
  </main>

  <footer><a href="../index.html">Back to Menu</a></footer>

  <script>
    const workspace = Blockly.inject('blocklyDiv', {
      toolbox: document.getElementById('toolbox'),
      scrollbars: true,
      trashcan: true
    });
  </script>
  <script src="../script.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    startTimer(60, () => {
      alert("Time is up! Review and try again.");
      document.getElementById("nextLevelBtn").style.display = "inline-block";
    });
    document.getElementById('nextLevelBtn').onclick = () => {
  window.location.href = '../levels/level5_data_structures.html'; // Adjust this to the actual path
      ////////////////////////
      // Get time left and calculate time taken for this stage
const timeLeft = parseInt(document.getElementById('time').textContent);
const timeTaken = 60 - timeLeft; // assuming each stage is 60 seconds

// Get cumulative time from localStorage
let totalTime = parseInt(localStorage.getItem('totalTime')) || 0;

// Add this stage's time to the total
totalTime += timeTaken;

// Save it back to localStorage
localStorage.setItem('totalTime', totalTime);
      //////////////////////
};
  });
</script>
</body>
</html>
